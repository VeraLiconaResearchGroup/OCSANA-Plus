<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="canonical" href="http://algorun.org">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>AlgoRun - fixing computational science reproducibility</title>
<script>window.twttr = (function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0],
t = window.twttr || {};
if (d.getElementById(id)) return t;
js = d.createElement(s);
js.id = id;
js.src = "https://platform.twitter.com/widgets.js";
fjs.parentNode.insertBefore(js, fjs);

t._e = [];
t.ready = function(f) {
t._e.push(f);
};

return t;
}(document, "script", "twitter-wjs"));</script>
<style>
    .manifest {
        text-align: left;
        padding-left: 5px;
    }      
    </style>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>AlgoRun</h1>
        <h2>Packaging your algorithm to Algorun platform</h2>
        <a href="https://github.com/algorun" class="button"><small>Follow us on</small> GitHub</a>
	<div id="twitter-follow">"<a class="twitter-follow-button" href="https://twitter.com/algorun" data-size="large" data-show-count="false"> Follow @AlgoRun</a></div>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to package your algorithm to Algorun platform?</h2>

            <p>In this page, we will show you how to package your algorithm to Algorun. If you have not worked with Docker before, please download our <a href="docs/porting-your-algorithm-to-algorun-platform.pdf" target="_blank">full documentation</a> to get started.<br><br>If you are familiar with Docker, the below guide is sufficient for you to start ..</p>
<h3>
<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Prepare your algorithm</h3>
<p>Prepare your algorithm to work in the following scenario:</p>
<ul>
    <li>Accept the input as a file and produce the output to another file.</li>
    <li>Have a single entry point. That is, it starts execution from one point. If your algorithm start
executing on multiple files, you should combine them such that the <code>algo_exec</code> (details below)
operates on one file only.</li>
    <li>Read the first command line argument as the file name as following:<br>
<code>command input_file</code></li>
    <table style="width:100%"><tr><td><code>command</code></td><td>Mandatory</td><td>The command you use through terminal to run your
algorithm</td></tr><tr><td><code>input_file</code></td><td>Mandatory</td><td>The input_file your algorithm read and process</td></tr></table>
            </ul>

<h3>
<a id="rather-drive-stick" class="anchor" href="#rather-drive-stick" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Wrap your algorithm in a container</h3>

<p>To make the process easy, we have provided you with a directory that contains all what you
    need. You will just edit the files on it. Go to <a href="https://github.com/algorun/algorun" target="_blank">our repository</a> and
clone it to your machine (You will just use ‘try it’ directory for now). When you open the directory, you
should be able to figure out the folders as in the following figure:</p>
        <img src="images/try-it-dir.png" alt="algorun try it directory">
        <ul><li>First, you put all your algorithm source code in src folder.</li>
            <li>Second, edit the Dockerfile. Open the file and follow the instructions in it. Basically, you are going only to install algorithm dependencies.<br>Example: <code>RUN apt-get install -y wget ruby2.0</code></li>
            <li>Finally, edit files in the algorun_info folder.</li>
        </ul>
            
        <table style="width:100%">
            <tr>
                <td colspan=2 class='manifest'><code>manifest.json</code></td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_name</b></td>
                <td class='manifest'>the name of your algorithm</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_summary </b></td>
                <td class='manifest'>a 1-line summary of your algorithm</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_description</b></td>
                <td class='manifest'>a few lines description of your algorithm (basic html accepted)</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_website </b></td>
                <td class='manifest'>url where users can find more information about your algorithm</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_keywords</b></td>
                <td class='manifest'>a list of keywords describing your algorithm</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_authors </b></td>
                <td class='manifest'>a list of all the algorithm's authors</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_exec </b></td>
                <td class='manifest'>the command to start algorithm execution. AlgoRun passes the input file as
the first argument</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_output_filename </b></td>
                <td class='manifest'>path of the file where your algorithm outputs its results</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_parameters </b></td>
                <td class='manifest'>list all the parameters available for your algorithm. These parameters will
be available for use in your algorithm as environment variables.</td>
            </tr>
            <tr>
                <td class='manifest'><b>algo_image </b></td>
                <td class='manifest'>Example: "ahosny/react". leave "" if you did not upload your algorithm to
docker hub or if you do not know what docker hub is :)</td>
            </tr>
            <tr>
                <td colspan="2" class='manifest'><code>input_example.txt</code></td>
            </tr>
            <tr>
                <td colspan="2" class="manifest">Fill it with the format of the input your algorithm accepts. This serves as a
guidance users to know how to input data</td>
            </tr>
            <tr>
                <td colspan="2" class='manifest'><code>output_example.txt</code></td>
            </tr>
            <tr>
                <td colspan="2" class="manifest">Fill it with the format of the output your algorithm produces. This gives the
user a glance on what result he will get</td>
            </tr>
            </table>    
<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Build, run and test your container</h3>

<ul><li>In you working directory, use the following command to build your container:<br>
<code>docker build -t &#60;username&#62;/&#60;algorithm&#62; .</code></li><li>Make sure that the build is successful.</li><li>Use the following command to run your container:<br>
<code>docker run -d -p 31331:8765 &#60;username&#62;/&#60;algorithm&#62;</code></li><li>Open your web browser and go to <code>http://localhost:31331</code> and see your algorithm in action.</li></ul>
    
<h2>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>
<p>In ‘try it/src’ directory we have added a very simple ruby application that reads an input, appends a
string to it and send it back (not an algorithm; but simple for illustration). We have also edited all files in
‘algorun_info' directory as a sample algorithm and then we added the dependencies necessary in the
Dockerfile.</p>
        </section>

        <aside id="sidebar">
		<div>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="Easily run and publish your algorithms with AlgoRun" data-via="algorun" data-hashtags="ScienceReproducibility">Tweet</a>
		</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </aside>
	<div style="clear:both;"></div>
	<footer>
		<p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.<br/>
	  	Copyright (C) 2015 Thibauld Favre</p>
	</footer>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-64522456-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
